var vStartTime,APIUrl="",iNumLights=500,iMaxPollTimer=6e4,iCalls=0;function readCookie(i){for(var t=i+"=",o=document.cookie.split(";"),e=0;e<o.length;e++){for(var n=o[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}function ColourTrigger(o){$.ajax({url:APIUrl,global:!0,success:function(i){iCalls++;var t=Date.now()-vStartTime,t=(1e3*iCalls/t).toFixed(2),t=($("#idCallsText").html("Calls:&nbsp;"+iCalls+"&nbsp;&nbsp;Rate: "+t+" ps"),i.name),i=($("#idLight"+o.toString()).css({fill:t}),Math.ceil(Math.random()*iMaxPollTimer));setTimeout(function(i){ColourTrigger(i)},i,o)}})}function doStart(){$("#idButStart").hide(),$("#idButReset").show(),iCalls=0,vStartTime=Date.now();for(var i,t=0;t<iNumLights;t++)i=Math.ceil(Math.random()*iMaxPollTimer),setTimeout(function(i){ColourTrigger(i)},i,t)}function doDefaultReady(){var i="";"Direct"===(APIMode=decodeURIComponent(readCookie("APIMode")))?(APIUrl=decodeURIComponent(readCookie("APIUrl")),$("#idAPIUrl").html(APIUrl)):(APIUrl=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/getcolour",$("#idAPIUrl").html(APIUrl+" &#10148; "+decodeURIComponent(readCookie("APIUrl")))),iNumLights=parseInt(decodeURIComponent(readCookie("NumberLights"))),isNaN(iNumLights)&&(iNumLights=500,$("#idErrorText").html("Need to configure"));for(var t=0;t<iNumLights;t++)i+="<svg height='30' width='30'><circle id='idLight"+t.toString()+"' cx='15' cy='15' r='12' stroke='black' stroke-width='1' fill='white' /></svg>";$("#idLights").append(i),$(document).ajaxError(function(i,t,o,e){t=t.status?"HTTP Error: "+t.status:"Failure: "+e;$("#idErrorText").html(t)})}function openNav(){$("#idnavoverlay").css("display","block"),$("#idnavsidebar").css("marginLeft","0px"),$("#idnavsidebar").css("marginRight","0px"),$("#idmaincontent").css("marginLeft","250px"),$("#idmaincontent").css("marginRight","-250px")}function closeNav(){$("#idnavsidebar").css("marginLeft","-250px"),$("#idnavsidebar").css("marginRight","250px"),$("#idmaincontent").css("marginLeft","0"),$("#idmaincontent").css("marginRight","0"),$("#idnavoverlay").css("display","none")}function toggleNav(){($("#idnavbutton").hasClass("is-active")?closeNav:openNav)(),$("#idnavbutton").toggleClass("is-active")}function gotoNav(i){toggleNav(),window.setTimeout("window.location.href='"+i+"'",500)}